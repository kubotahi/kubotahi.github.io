{"version":3,"sources":["webpack:///./src/views/04.vue?e938","webpack:///./src/views/04.vue","webpack:///./src/views/04.vue?ce2a","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","width","height","data","mounted","marge","top","bottom","left","right","svg","d3","selectAll","remove","zoomHandler","on","zoomActions","window","innerWidth","innerHeight","g","append","attr","nodes","name","edges","source","target","relation","value","colorScale","domain","length","range","forceSimulation","force","ticked","links","distance","d","x","y","enter","i","linksText","text","gs","cirX","cirY","call","started","dragged","ended","active","alphaTarget","restart","fx","fy","transform","render","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","this","match","error"],"mappings":"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","file":"js/chunk-02336df8.c2de9eef.js","sourcesContent":["export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./04.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./04.vue?vue&type=style&index=0&lang=css\"","<template>\r\n  <div class=\"container\">\r\n\r\n    <svg width=\"100%\" height=\"100%\"></svg>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3'\r\n\r\nexport default {\r\n  data () {\r\n    return {}\r\n  },\r\n  mounted () {\r\n    let marge = { top: 60, bottom: 60, left: 60, right: 60 }\r\n    let svg = d3.select('svg')\r\n\r\n    // SVGのリセット\r\n    svg.selectAll(\"*\").remove()\r\n\r\n    // add zoom capabilities\r\n    let zoomHandler = d3.zoom()\r\n      .on('zoom', zoomActions)\r\n\r\n    zoomHandler(svg)\r\n\r\n\r\n    //let width = svg.attr('width')\r\n    //let height = svg.attr('height')\r\n    //let width = 1000\r\n    //let height = 600\r\n    let width = window.innerWidth\r\n    let height = window.innerHeight - 300\r\n\r\n    let g = svg.append('g')\r\n      .attr('transform', 'translate(' + marge.top + ',' + marge.left + ')')\r\n\r\n    // 准备数据\r\n    // 节点集\r\n    let nodes = [\r\n      { name: 'A' },\r\n      { name: 'B' },\r\n      { name: 'C' },\r\n      { name: 'D' },\r\n      { name: 'E' },\r\n      { name: 'F' },\r\n      { name: 'G' },\r\n      { name: 'H' },\r\n      { name: 'I' }\r\n    ]\r\n    // 边集\r\n    let edges = [\r\n      { source: 0, target: 4, relation: '友達', value: 1.3 },\r\n      { source: 4, target: 5, relation: '姉妹', value: 1 },\r\n      { source: 4, target: 6, relation: '片思い', value: 1 },\r\n      { source: 4, target: 7, relation: '友達', value: 1 },\r\n      { source: 1, target: 6, relation: '恋人', value: 2 },\r\n      { source: 2, target: 5, relation: '友達', value: 0.9 },\r\n      { source: 3, target: 7, relation: '腐れ縁', value: 1 },\r\n      { source: 5, target: 6, relation: '友達', value: 1.6 },\r\n      { source: 6, target: 7, relation: '兄弟', value: 0.7 },\r\n      { source: 6, target: 8, relation: '友達', value: 2 }\r\n    ]\r\n    // 设置一个颜色比例尺\r\n    let colorScale = d3.scaleOrdinal()\r\n      .domain(d3.range(nodes.length))\r\n      .range(d3.schemeCategory10)\r\n    // 新建一个力导向图\r\n    let forceSimulation = d3.forceSimulation()\r\n      .force('link', d3.forceLink())\r\n      .force('charge', d3.forceManyBody())\r\n      .force('center', d3.forceCenter())\r\n    // 生成节点数据\r\n    forceSimulation.nodes(nodes)\r\n      .on('tick', ticked)\r\n    // 生成边数据\r\n    forceSimulation.force('link')\r\n      .links(edges)\r\n      .distance(function (d) { // 每一边的长度\r\n        return d.value * 100\r\n      })\r\n    // 设置图形中心位置\r\n    forceSimulation.force('center')\r\n      .x(width / 2)\r\n      .y(height / 2)\r\n    // // 顶点集，边集\r\n    // console.log(nodes)\r\n    // console.log(edges)\r\n    // 绘制边\r\n    let links = g.append('g')\r\n      .selectAll('line')\r\n      .data(edges)\r\n      .enter()\r\n      .append('line')\r\n      .attr('stroke', function (d, i) {\r\n        return colorScale(i)\r\n      })\r\n      .attr('stroke-width', 1)\r\n    // 边上的文字\r\n    let linksText = g.append('g')\r\n      .selectAll('text')\r\n      .data(edges)\r\n      .enter()\r\n      .append('text')\r\n      .text(function (d) {\r\n        return d.relation\r\n      })\r\n    // 创建分组\r\n    let gs = g.selectAll('.circleText')\r\n      .data(nodes)\r\n      .enter()\r\n      .append('g')\r\n      .attr('transform', function (d) {\r\n        let cirX = d.x\r\n        let cirY = d.y\r\n        return 'translate(' + cirX + ',' + cirY + ')'\r\n      })\r\n      .call(d3.drag()\r\n        .on('start', started)\r\n        .on('drag', dragged)\r\n        .on('end', ended)\r\n      )\r\n    // 绘制节点\r\n    gs.append('circle')\r\n      .attr('r', 20)\r\n      .attr('fill', function (d, i) {\r\n        return colorScale(i)\r\n      })\r\n    // 文字\r\n    gs.append('text')\r\n      .attr('x', -5)\r\n      .attr('y', -10)\r\n      .attr('dy', 10)\r\n      .text(function (d) {\r\n        return d.name\r\n      })\r\n    // ticked\r\n    function ticked () {\r\n      links\r\n        .attr('x1', function (d) { return d.source.x })\r\n        .attr('y1', function (d) { return d.source.y })\r\n        .attr('x2', function (d) { return d.target.x })\r\n        .attr('y2', function (d) { return d.target.y })\r\n      linksText\r\n        .attr('x', function (d) { return (d.source.x + d.target.x) / 2 })\r\n        .attr('y', function (d) { return (d.source.y + d.target.y) / 2 })\r\n      gs\r\n        .attr('transform', function (d) { return 'translate(' + d.x + ',' + d.y + ')' })\r\n    }\r\n    // drag\r\n    function started (d) {\r\n      if (!d3.event.active) {\r\n        forceSimulation.alphaTarget(0.8).restart()\r\n      }\r\n      d.fx = d.x\r\n      d.fy = d.y\r\n    }\r\n    function dragged (d) {\r\n      d.fx = d3.event.x\r\n      d.fy = d3.event.y\r\n    }\r\n    function ended (d) {\r\n      if (!d3.event.active) {\r\n        forceSimulation.alphaTarget(0)\r\n      }\r\n      d.fx = null\r\n      d.fy = null\r\n    }\r\n\r\n    // Zoom functions\r\n    function zoomActions () {\r\n      g.attr('transform', d3.event.transform)\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n<style>\r\ntext {\r\n  fill: #000000;\r\n}\r\n</style>\r\n","import { render } from \"./04.vue?vue&type=template&id=45a22560&bindings={}\"\nimport script from \"./04.vue?vue&type=script&lang=js\"\nexport * from \"./04.vue?vue&type=script&lang=js\"\n\nimport \"./04.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}